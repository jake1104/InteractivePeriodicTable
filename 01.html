<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-m">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인터랙티브 주기율표</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- html2canvas (PNG 내보내기용) 로드 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Noto Sans KR 폰트 로드 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Nanum+Gothic:wght@400;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- 추가된 폰트 로드 -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

    <style>
        /* 기본 폰트 설정 */
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }

        /* 주기율표 그리드 설정 */
        #periodic-table {
            display: grid;
            grid-template-columns: repeat(18, minmax(0, 1fr));
            grid-template-rows: repeat(10, minmax(0, 1fr));
            gap: 4px;
            width: 100%;
            max-width: 1600px;
            margin: auto;
            /* 기본 폰트 설정 */
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }

        /* 각 원소의 기본 스타일 */
        .element {
            aspect-ratio: 1 / 1; /* 정사각형 비율 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4px;
            font-size: 0.7rem; /* 기본 폰트 크기 */
            line-height: 1.2;
            overflow: hidden;
            word-break: break-all;
            position: relative;
        }
        
        /* 더 작은 화면을 위한 미디어 쿼리 */
        @media (max-width: 1200px) {
            .element {
                font-size: 0.6rem;
                padding: 2px;
            }
            .symbol {
                font-size: 1rem !important;
            }
        }
        @media (max-width: 768px) {
            .element {
                font-size: 0.5rem;
            }
            .symbol {
                font-size: 0.8rem !important;
            }
        }

        /* 원소 기호 스타일 */
        .symbol {
            font-size: 1.25rem;
            font-weight: 700;
        }

        /* 원자 번호 */
        .atomic-number {
            position: absolute;
            top: 4px;
            left: 4px;
            font-size: 0.6rem;
        }
        
        /* 상온 상태 마커 */
        .state-marker {
            position: absolute;
            top: 4px;
            right: 4px;
            font-weight: 700;
        }
        .state-gas { color: #e11d48; } /* red-600 */
        .state-liquid { color: #2563eb; } /* blue-600 */
        .state-solid { color: #1f2937; } /* gray-800 */
        .state-unknown { color: #6b7280; } /* gray-500 */


        /* CSS 변수를 사용한 카테고리별 색상 정의 */
        :root {
            --color-alkali-metal: #fca5a5;
            --color-alkaline-earth-metal: #fdba74;
            --color-lanthanide: #fde047;
            --color-actinide: #bef264;
            --color-transition-metal: #6ee7b7;
            --color-post-transition-metal: #7dd3fc;
            --color-metalloid: #a5b4fc;
            --color-nonmetal: #c4b5fd;
            --color-halogen: #f0abfc;
            --color-noble-gas: #f9a8d4;
            --color-unknown: #d1d5db;
        }

        /* 카테고리별 배경색 적용 */
        .element[data-category="alkali-metal"] { background-color: var(--color-alkali-metal); }
        .element[data-category="alkaline-earth-metal"] { background-color: var(--color-alkaline-earth-metal); }
        .element[data-category="lanthanide"] { background-color: var(--color-lanthanide); }
        .element[data-category="actinide"] { background-color: var(--color-actinide); }
        .element[data-category="transition-metal"] { background-color: var(--color-transition-metal); }
        .element[data-category="post-transition-metal"] { background-color: var(--color-post-transition-metal); }
        .element[data-category="metalloid"] { background-color: var(--color-metalloid); }
        .element[data-category="nonmetal"] { background-color: var(--color-nonmetal); }
        .element[data-category="halogen"] { background-color: var(--color-halogen); }
        .element[data-category="noble-gas"] { background-color: var(--color-noble-gas); }
        .element[data-category="unknown"] { background-color: var(--color-unknown); }

        /* 토글 기능용 CSS 클래스 */
        .hide-categories .element {
            background-color: #f3f4f6; /* gray-100 */
            border-color: #d1d5db; /* gray-300 */
        }
        .hide-number .atomic-number { display: none; }
        .hide-symbol .symbol { display: none; }
        .hide-name-kr .name-kr { display: none; }
        .hide-name-en .name-en { display: none; }
        .hide-weight .atomic-weight { display: none; }
        .hide-state .state-marker { display: none; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 p-4 md:p-8">

    <div class="container mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">인터랙티브 주기율표</h1>

        <!-- 제어판 -->
        <div id="controls" class="bg-white p-6 rounded-lg shadow-md mb-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- 정보 토글 섹션 -->
                <div>
                    <h3 class="text-lg font-semibold mb-3 border-b pb-2">정보 표시/숨기기</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-categories" class="rounded" checked>
                            <span>계열 색상 (금속/비금속)</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-state" class="rounded" checked>
                            <span>상온 상태 (고/액/기)</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-number" class="rounded" checked>
                            <span>원자 번호</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-symbol" class="rounded" checked>
                            <span>원소 기호</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-name-kr" class="rounded" checked>
                            <span>한글 이름</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-name-en" class="rounded" checked>
                            <span>영어 이름</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="toggle-weight" class="rounded" checked>
                            <span>원자량</span>
                        </label>
                    </div>
                </div>

                <!-- 디자인 커스터마이징 섹션 -->
                <div>
                    <h3 class="text-lg font-semibold mb-3 border-b pb-2">디자인 설정</h3>
                    <div class="space-y-3">
                        <label class="block">
                            <span class="text-sm font-medium">폰트 변경</span>
                            <select id="font-select" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                <option value="'Inter', 'Noto Sans KR', sans-serif" style="font-family: 'Inter', 'Noto Sans KR', sans-serif;">Inter / Noto Sans KR (기본)</option>
                                <option value="'Pretendard', sans-serif" style="font-family: 'Pretendard', sans-serif;">Pretendard (프리텐다드)</option>
                                <option value="'Nanum Gothic', sans-serif" style="font-family: 'Nanum Gothic', sans-serif;">Nanum Gothic (나눔고딕)</option>
                                <option value="'Nanum Pen Script', cursive" style="font-family: 'Nanum Pen Script', cursive; font-size: 1.2rem;">Nanum Pen Script (필기체-한)</option>
                                <option value="'Dancing Script', cursive" style="font-family: 'Dancing Script', cursive; font-size: 1.2rem;">Dancing Script (필기체-영)</option>
                                <option value="'Merriweather', serif" style="font-family: 'Merriweather', serif;">Merriweather (세리프)</option>
                                <option value="'Times New Roman', serif" style="font-family: 'Times New Roman', serif;">Times New Roman (세리프)</option>
                                <option value="Arial, sans-serif" style="font-family: Arial, sans-serif;">Arial (산세리프)</option>
                                <option value="'Roboto Mono', monospace" style="font-family: 'Roboto Mono', monospace;">Roboto Mono (고정폭)</option>
                                <option value="'Courier New', monospace" style="font-family: 'Courier New', monospace;">Courier New (고정폭)</option>
                            </select>
                        </label>
                        
                        <div class="pt-2">
                            <h4 class="text-sm font-medium mb-2">계열 색상 변경</h4>
                            <div id="color-controls" class="grid grid-cols-2 gap-2 text-sm">
                                <!-- 색상 피커가 동적으로 여기에 삽입됩니다. -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 내보내기 섹션 -->
                <div>
                    <h3 class="text-lg font-semibold mb-3 border-b pb-2">도구</h3>
                    <button id="export-png-btn" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                        PNG로 내보내기
                    </button>
                    <p class="text-xs text-gray-500 mt-2">현재 설정된 모습 그대로 주기율표를 이미지 파일로 저장합니다.</p>
                </div>

            </div>
        </div>

        <!-- 주기율표 컨테이너 (가로 스크롤) -->
        <div id="periodic-table-wrapper" class="overflow-x-auto bg-white p-4 rounded-lg shadow-inner">
            <div id="periodic-table">
                <!-- 원소들이 여기에 동적으로 생성됩니다. -->
            </div>
        </div>
    </div>

    <script>
        // 원소 데이터
        // (number: 원자번호, symbol: 원소기호, name_en: 영어이름, name_kr: 한글이름, atomic_weight: 원자량, 
        //  category: 계열, state_at_stp: 상온상태, row: 그리드 행, col: 그리드 열)
        const elements = [
            { number: 1, symbol: 'H', name_en: 'Hydrogen', name_kr: '수소', atomic_weight: '1.008', category: 'nonmetal', state_at_stp: 'gas', row: 1, col: 1 },
            { number: 2, symbol: 'He', name_en: 'Helium', name_kr: '헬륨', atomic_weight: '4.0026', category: 'noble-gas', state_at_stp: 'gas', row: 1, col: 18 },
            { number: 3, symbol: 'Li', name_en: 'Lithium', name_kr: '리튬', atomic_weight: '6.94', category: 'alkali-metal', state_at_stp: 'solid', row: 2, col: 1 },
            { number: 4, symbol: 'Be', name_en: 'Beryllium', name_kr: '베릴륨', atomic_weight: '9.0122', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 2, col: 2 },
            { number: 5, symbol: 'B', name_en: 'Boron', name_kr: '붕소', atomic_weight: '10.81', category: 'metalloid', state_at_stp: 'solid', row: 2, col: 13 },
            { number: 6, symbol: 'C', name_en: 'Carbon', name_kr: '탄소', atomic_weight: '12.011', category: 'nonmetal', state_at_stp: 'solid', row: 2, col: 14 },
            { number: 7, symbol: 'N', name_en: 'Nitrogen', name_kr: '질소', atomic_weight: '14.007', category: 'nonmetal', state_at_stp: 'gas', row: 2, col: 15 },
            { number: 8, symbol: 'O', name_en: 'Oxygen', name_kr: '산소', atomic_weight: '15.999', category: 'nonmetal', state_at_stp: 'gas', row: 2, col: 16 },
            { number: 9, symbol: 'F', name_en: 'Fluorine', name_kr: '플루오린', atomic_weight: '18.998', category: 'halogen', state_at_stp: 'gas', row: 2, col: 17 },
            { number: 10, symbol: 'Ne', name_en: 'Neon', name_kr: '네온', atomic_weight: '20.180', category: 'noble-gas', state_at_stp: 'gas', row: 2, col: 18 },
            { number: 11, symbol: 'Na', name_en: 'Sodium', name_kr: '나트륨', atomic_weight: '22.990', category: 'alkali-metal', state_at_stp: 'solid', row: 3, col: 1 },
            { number: 12, symbol: 'Mg', name_en: 'Magnesium', name_kr: '마그네슘', atomic_weight: '24.305', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 3, col: 2 },
            { number: 13, symbol: 'Al', name_en: 'Aluminum', name_kr: '알루미늄', atomic_weight: '26.982', category: 'post-transition-metal', state_at_stp: 'solid', row: 3, col: 13 },
            { number: 14, symbol: 'Si', name_en: 'Silicon', name_kr: '규소', atomic_weight: '28.085', category: 'metalloid', state_at_stp: 'solid', row: 3, col: 14 },
            { number: 15, symbol: 'P', name_en: 'Phosphorus', name_kr: '인', atomic_weight: '30.974', category: 'nonmetal', state_at_stp: 'solid', row: 3, col: 15 },
            { number: 16, symbol: 'S', name_en: 'Sulfur', name_kr: '황', atomic_weight: '32.06', category: 'nonmetal', state_at_stp: 'solid', row: 3, col: 16 },
            { number: 17, symbol: 'Cl', name_en: 'Chlorine', name_kr: '염소', atomic_weight: '35.45', category: 'halogen', state_at_stp: 'gas', row: 3, col: 17 },
            { number: 18, symbol: 'Ar', name_en: 'Argon', name_kr: '아르곤', atomic_weight: '39.948', category: 'noble-gas', state_at_stp: 'gas', row: 3, col: 18 },
            { number: 19, symbol: 'K', name_en: 'Potassium', name_kr: '칼륨', atomic_weight: '39.098', category: 'alkali-metal', state_at_stp: 'solid', row: 4, col: 1 },
            { number: 20, symbol: 'Ca', name_en: 'Calcium', name_kr: '칼슘', atomic_weight: '40.078', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 4, col: 2 },
            { number: 21, symbol: 'Sc', name_en: 'Scandium', name_kr: '스칸듐', atomic_weight: '44.956', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 3 },
            { number: 22, symbol: 'Ti', name_en: 'Titanium', name_kr: '타이타늄', atomic_weight: '47.867', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 4 },
            { number: 23, symbol: 'V', name_en: 'Vanadium', name_kr: '바나듐', atomic_weight: '50.942', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 5 },
            { number: 24, symbol: 'Cr', name_en: 'Chromium', name_kr: '크로뮴', atomic_weight: '51.996', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 6 },
            { number: 25, symbol: 'Mn', name_en: 'Manganese', name_kr: '망가니즈', atomic_weight: '54.938', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 7 },
            { number: 26, symbol: 'Fe', name_en: 'Iron', name_kr: '철', atomic_weight: '55.845', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 8 },
            { number: 27, symbol: 'Co', name_en: 'Cobalt', name_kr: '코발트', atomic_weight: '58.933', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 9 },
            { number: 28, symbol: 'Ni', name_en: 'Nickel', name_kr: '니켈', atomic_weight: '58.693', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 10 },
            { number: 29, symbol: 'Cu', name_en: 'Copper', name_kr: '구리', atomic_weight: '63.546', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 11 },
            { number: 30, symbol: 'Zn', name_en: 'Zinc', name_kr: '아연', atomic_weight: '65.38', category: 'transition-metal', state_at_stp: 'solid', row: 4, col: 12 },
            { number: 31, symbol: 'Ga', name_en: 'Gallium', name_kr: '갈륨', atomic_weight: '69.723', category: 'post-transition-metal', state_at_stp: 'solid', row: 4, col: 13 },
            { number: 32, symbol: 'Ge', name_en: 'Germanium', name_kr: '저마늄', atomic_weight: '72.630', category: 'metalloid', state_at_stp: 'solid', row: 4, col: 14 },
            { number: 33, symbol: 'As', name_en: 'Arsenic', name_kr: '비소', atomic_weight: '74.922', category: 'metalloid', state_at_stp: 'solid', row: 4, col: 15 },
            { number: 34, symbol: 'Se', name_en: 'Selenium', name_kr: '셀레늄', atomic_weight: '78.971', category: 'nonmetal', state_at_stp: 'solid', row: 4, col: 16 },
            { number: 35, symbol: 'Br', name_en: 'Bromine', name_kr: '브로민', atomic_weight: '79.904', category: 'halogen', state_at_stp: 'liquid', row: 4, col: 17 },
            { number: 36, symbol: 'Kr', name_en: 'Krypton', name_kr: '크립톤', atomic_weight: '83.798', category: 'noble-gas', state_at_stp: 'gas', row: 4, col: 18 },
            { number: 37, symbol: 'Rb', name_en: 'Rubidium', name_kr: '루비듐', atomic_weight: '85.468', category: 'alkali-metal', state_at_stp: 'solid', row: 5, col: 1 },
            { number: 38, symbol: 'Sr', name_en: 'Strontium', name_kr: '스트론튬', atomic_weight: '87.62', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 5, col: 2 },
            { number: 39, symbol: 'Y', name_en: 'Yttrium', name_kr: '이트륨', atomic_weight: '88.906', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 3 },
            { number: 40, symbol: 'Zr', name_en: 'Zirconium', name_kr: '지르코늄', atomic_weight: '91.224', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 4 },
            { number: 41, symbol: 'Nb', name_en: 'Niobium', name_kr: '나이오븀', atomic_weight: '92.906', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 5 },
            { number: 42, symbol: 'Mo', name_en: 'Molybdenum', name_kr: '몰리브데넘', atomic_weight: '95.96', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 6 },
            { number: 43, symbol: 'Tc', name_en: 'Technetium', name_kr: '테크네튬', atomic_weight: '(98)', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 7 },
            { number: 44, symbol: 'Ru', name_en: 'Ruthenium', name_kr: '루테늄', atomic_weight: '101.07', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 8 },
            { number: 45, symbol: 'Rh', name_en: 'Rhodium', name_kr: '로듐', atomic_weight: '102.91', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 9 },
            { number: 46, symbol: 'Pd', name_en: 'Palladium', name_kr: '팔라듐', atomic_weight: '106.42', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 10 },
            { number: 47, symbol: 'Ag', name_en: 'Silver', name_kr: '은', atomic_weight: '107.87', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 11 },
            { number: 48, symbol: 'Cd', name_en: 'Cadmium', name_kr: '카드뮴', atomic_weight: '112.41', category: 'transition-metal', state_at_stp: 'solid', row: 5, col: 12 },
            { number: 49, symbol: 'In', name_en: 'Indium', name_kr: '인듐', atomic_weight: '114.82', category: 'post-transition-metal', state_at_stp: 'solid', row: 5, col: 13 },
            { number: 50, symbol: 'Sn', name_en: 'Tin', name_kr: '주석', atomic_weight: '118.71', category: 'post-transition-metal', state_at_stp: 'solid', row: 5, col: 14 },
            { number: 51, symbol: 'Sb', name_en: 'Antimony', name_kr: '안티모니', atomic_weight: '121.76', category: 'metalloid', state_at_stp: 'solid', row: 5, col: 15 },
            { number: 52, symbol: 'Te', name_en: 'Tellurium', name_kr: '텔루륨', atomic_weight: '127.60', category: 'metalloid', state_at_stp: 'solid', row: 5, col: 16 },
            { number: 53, symbol: 'I', name_en: 'Iodine', name_kr: '아이오딘', atomic_weight: '126.90', category: 'halogen', state_at_stp: 'solid', row: 5, col: 17 },
            { number: 54, symbol: 'Xe', name_en: 'Xenon', name_kr: '제논', atomic_weight: '131.29', category: 'noble-gas', state_at_stp: 'gas', row: 5, col: 18 },
            { number: 55, symbol: 'Cs', name_en: 'Caesium', name_kr: '세슘', atomic_weight: '132.91', category: 'alkali-metal', state_at_stp: 'solid', row: 6, col: 1 },
            { number: 56, symbol: 'Ba', name_en: 'Barium', name_kr: '바륨', atomic_weight: '137.33', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 6, col: 2 },
            { number: 57, symbol: 'La', name_en: 'Lanthanum', name_kr: '란타넘', atomic_weight: '138.91', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 3 },
            { number: 58, symbol: 'Ce', name_en: 'Cerium', name_kr: '세륨', atomic_weight: '140.12', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 4 },
            { number: 59, symbol: 'Pr', name_en: 'Praseodymium', name_kr: '프라세오디뮴', atomic_weight: '140.91', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 5 },
            { number: 60, symbol: 'Nd', name_en: 'Neodymium', name_kr: '네오디뮴', atomic_weight: '144.24', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 6 },
            { number: 61, symbol: 'Pm', name_en: 'Promethium', name_kr: '프로메튬', atomic_weight: '(145)', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 7 },
            { number: 62, symbol: 'Sm', name_en: 'Samarium', name_kr: '사마륨', atomic_weight: '150.36', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 8 },
            { number: 63, symbol: 'Eu', name_en: 'Europium', name_kr: '유로퓸', atomic_weight: '151.96', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 9 },
            { number: 64, symbol: 'Gd', name_en: 'Gadolinium', name_kr: '가돌리늄', atomic_weight: '157.25', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 10 },
            { number: 65, symbol: 'Tb', name_en: 'Terbium', name_kr: '터븀', atomic_weight: '158.93', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 11 },
            { number: 66, symbol: 'Dy', name_en: 'Dysprosium', name_kr: '디스프로슘', atomic_weight: '162.50', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 12 },
            { number: 67, symbol: 'Ho', name_en: 'Holmium', name_kr: '홀뮴', atomic_weight: '164.93', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 13 },
            { number: 68, symbol: 'Er', name_en: 'Erbium', name_kr: '어븀', atomic_weight: '167.26', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 14 },
            { number: 69, symbol: 'Tm', name_en: 'Thulium', name_kr: '툴륨', atomic_weight: '168.93', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 15 },
            { number: 70, symbol: 'Yb', name_en: 'Ytterbium', name_kr: '이터븀', atomic_weight: '173.05', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 16 },
            { number: 71, symbol: 'Lu', name_en: 'Lutetium', name_kr: '루테튬', atomic_weight: '174.97', category: 'lanthanide', state_at_stp: 'solid', row: 9, col: 17 },
            { number: 72, symbol: 'Hf', name_en: 'Hafnium', name_kr: '하프늄', atomic_weight: '178.49', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 4 },
            { number: 73, symbol: 'Ta', name_en: 'Tantalum', name_kr: '탄탈럼', atomic_weight: '180.95', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 5 },
            { number: 74, symbol: 'W', name_en: 'Tungsten', name_kr: '텅스텐', atomic_weight: '183.84', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 6 },
            { number: 75, symbol: 'Re', name_en: 'Rhenium', name_kr: '레늄', atomic_weight: '186.21', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 7 },
            { number: 76, symbol: 'Os', name_en: 'Osmium', name_kr: '오스뮴', atomic_weight: '190.23', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 8 },
            { number: 77, symbol: 'Ir', name_en: 'Iridium', name_kr: '이리듐', atomic_weight: '192.22', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 9 },
            { number: 78, symbol: 'Pt', name_en: 'Platinum', name_kr: '백금', atomic_weight: '195.08', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 10 },
            { number: 79, symbol: 'Au', name_en: 'Gold', name_kr: '금', atomic_weight: '196.97', category: 'transition-metal', state_at_stp: 'solid', row: 6, col: 11 },
            { number: 80, symbol: 'Hg', name_en: 'Mercury', name_kr: '수은', atomic_weight: '200.59', category: 'transition-metal', state_at_stp: 'liquid', row: 6, col: 12 },
            { number: 81, symbol: 'Tl', name_en: 'Thallium', name_kr: '탈륨', atomic_weight: '204.38', category: 'post-transition-metal', state_at_stp: 'solid', row: 6, col: 13 },
            { number: 82, symbol: 'Pb', name_en: 'Lead', name_kr: '납', atomic_weight: '207.2', category: 'post-transition-metal', state_at_stp: 'solid', row: 6, col: 14 },
            { number: 83, symbol: 'Bi', name_en: 'Bismuth', name_kr: '비스무트', atomic_weight: '208.98', category: 'post-transition-metal', state_at_stp: 'solid', row: 6, col: 15 },
            { number: 84, symbol: 'Po', name_en: 'Polonium', name_kr: '폴로늄', atomic_weight: '(209)', category: 'post-transition-metal', state_at_stp: 'solid', row: 6, col: 16 },
            { number: 85, symbol: 'At', name_en: 'Astatine', name_kr: '아스타틴', atomic_weight: '(210)', category: 'metalloid', state_at_stp: 'solid', row: 6, col: 17 },
            { number: 86, symbol: 'Rn', name_en: 'Radon', name_kr: '라돈', atomic_weight: '(222)', category: 'noble-gas', state_at_stp: 'gas', row: 6, col: 18 },
            { number: 87, symbol: 'Fr', name_en: 'Francium', name_kr: '프랑슘', atomic_weight: '(223)', category: 'alkali-metal', state_at_stp: 'solid', row: 7, col: 1 },
            { number: 88, symbol: 'Ra', name_en: 'Radium', name_kr: '라듐', atomic_weight: '(226)', category: 'alkaline-earth-metal', state_at_stp: 'solid', row: 7, col: 2 },
            { number: 89, symbol: 'Ac', name_en: 'Actinium', name_kr: '악티늄', atomic_weight: '(227)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 3 },
            { number: 90, symbol: 'Th', name_en: 'Thorium', name_kr: '토륨', atomic_weight: '232.04', category: 'actinide', state_at_stp: 'solid', row: 10, col: 4 },
            { number: 91, symbol: 'Pa', name_en: 'Protactinium', name_kr: '프로트악티늄', atomic_weight: '231.04', category: 'actinide', state_at_stp: 'solid', row: 10, col: 5 },
            { number: 92, symbol: 'U', name_en: 'Uranium', name_kr: '우라늄', atomic_weight: '238.03', category: 'actinide', state_at_stp: 'solid', row: 10, col: 6 },
            { number: 93, symbol: 'Np', name_en: 'Neptunium', name_kr: '넵투늄', atomic_weight: '(237)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 7 },
            { number: 94, symbol: 'Pu', name_en: 'Plutonium', name_kr: '플루토늄', atomic_weight: '(244)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 8 },
            { number: 95, symbol: 'Am', name_en: 'Americium', name_kr: '아메리슘', atomic_weight: '(243)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 9 },
            { number: 96, symbol: 'Cm', name_en: 'Curium', name_kr: '퀴륨', atomic_weight: '(247)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 10 },
            { number: 97, symbol: 'Bk', name_en: 'Berkelium', name_kr: '버클륨', atomic_weight: '(247)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 11 },
            { number: 98, symbol: 'Cf', name_en: 'Californium', name_kr: '칼리포늄', atomic_weight: '(251)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 12 },
            { number: 99, symbol: 'Es', name_en: 'Einsteinium', name_kr: '아인슈타이늄', atomic_weight: '(252)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 13 },
            { number: 100, symbol: 'Fm', name_en: 'Fermium', name_kr: '페르뮴', atomic_weight: '(257)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 14 },
            { number: 101, symbol: 'Md', name_en: 'Mendelevium', name_kr: '멘델레븀', atomic_weight: '(258)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 15 },
            { number: 102, symbol: 'No', name_en: 'Nobelium', name_kr: '노벨륨', atomic_weight: '(259)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 16 },
            { number: 103, symbol: 'Lr', name_en: 'Lawrencium', name_kr: '로렌슘', atomic_weight: '(262)', category: 'actinide', state_at_stp: 'solid', row: 10, col: 17 },
            { number: 104, symbol: 'Rf', name_en: 'Rutherfordium', name_kr: '러더포듐', atomic_weight: '(267)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 4 },
            { number: 105, symbol: 'Db', name_en: 'Dubnium', name_kr: '더브늄', atomic_weight: '(270)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 5 },
            { number: 106, symbol: 'Sg', name_en: 'Seaborgium', name_kr: '시보귬', atomic_weight: '(271)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 6 },
            { number: 107, symbol: 'Bh', name_en: 'Bohrium', name_kr: '보륨', atomic_weight: '(270)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 7 },
            { number: 108, symbol: 'Hs', name_en: 'Hassium', name_kr: '하슘', atomic_weight: '(277)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 8 },
            { number: 109, symbol: 'Mt', name_en: 'Meitnerium', name_kr: '마이트너륨', atomic_weight: '(278)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 9 },
            { number: 110, symbol: 'Ds', name_en: 'Darmstadtium', name_kr: '다름슈타튬', atomic_weight: '(281)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 10 },
            { number: 111, symbol: 'Rg', name_en: 'Roentgenium', name_kr: '뢴트게늄', atomic_weight: '(282)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 11 },
            { number: 112, symbol: 'Cn', name_en: 'Copernicium', name_kr: '코페르니슘', atomic_weight: '(285)', category: 'transition-metal', state_at_stp: 'unknown', row: 7, col: 12 },
            { number: 113, symbol: 'Nh', name_en: 'Nihonium', name_kr: '니호늄', atomic_weight: '(286)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 13 },
            { number: 114, symbol: 'Fl', name_en: 'Flerovium', name_kr: '플레로븀', atomic_weight: '(289)', category: 'post-transition-metal', state_at_stp: 'unknown', row: 7, col: 14 },
            { number: 115, symbol: 'Mc', name_en: 'Moscovium', name_kr: '모스코븀', atomic_weight: '(290)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 15 },
            { number: 116, symbol: 'Lv', name_en: 'Livermorium', name_kr: '리버모륨', atomic_weight: '(293)', category: 'unknown', state_at_stp: 'unknown', row: 7, col: 16 },
            { number: 117, symbol: 'Ts', name_en: 'Tennessine', name_kr: '테네신', atomic_weight: '(294)', category: 'halogen', state_at_stp: 'unknown', row: 7, col: 17 },
            { number: 118, symbol: 'Og', name_en: 'Oganesson', name_kr: '오가네손', atomic_weight: '(294)', category: 'noble-gas', state_at_stp: 'unknown', row: 7, col: 18 },
        ];
        
        // 원소 계열 정보 (색상 커스터마이징용)
        const categories = {
            'alkali-metal': { name_kr: '알칼리 금속', defaultColor: '#fca5a5' },
            'alkaline-earth-metal': { name_kr: '알칼리 토금속', defaultColor: '#fdba74' },
            'lanthanide': { name_kr: '란타넘족', defaultColor: '#fde047' },
            'actinide': { name_kr: '악티늄족', defaultColor: '#bef264' },
            'transition-metal': { name_kr: '전이 금속', defaultColor: '#6ee7b7' },
            'post-transition-metal': { name_kr: '전이후 금속', defaultColor: '#7dd3fc' },
            'metalloid': { name_kr: '준금속', defaultColor: '#a5b4fc' },
            'nonmetal': { name_kr: '비금속 (수소 포함)', defaultColor: '#c4b5fd' },
            'halogen': { name_kr: '할로젠', defaultColor: '#f0abfc' },
            'noble-gas': { name_kr: '비활성 기체', defaultColor: '#f9a8d4' },
            'unknown': { name_kr: '미분류', defaultColor: '#d1d5db' }
        };
        
        // 상온 상태 클래스 매핑
        const stateClasses = {
            gas: 'state-gas',
            liquid: 'state-liquid',
            solid: 'state-solid',
            unknown: 'state-unknown'
        };

        const stateSymbols = {
            gas: 'G',
            liquid: 'L',
            solid: 'S',
            unknown: '?'
        };

        // 주기율표 렌더링 함수
        function renderTable() {
            const table = document.getElementById('periodic-table');
            table.innerHTML = ''; // 기존 내용 초기화

            // 란타넘/악티늄족 자리 표시
            const lanthanidePlaceholder = document.createElement('div');
            lanthanidePlaceholder.className = 'element bg-gray-100 text-gray-400 text-center';
            lanthanidePlaceholder.style.gridRow = 6;
            lanthanidePlaceholder.style.gridColumn = 3;
            lanthanidePlaceholder.innerHTML = '<div>57-71</div><div>Lanthanides</div>';
            table.appendChild(lanthanidePlaceholder);

            const actinidePlaceholder = document.createElement('div');
            actinidePlaceholder.className = 'element bg-gray-100 text-gray-400 text-center';
            actinidePlaceholder.style.gridRow = 7;
            actinidePlaceholder.style.gridColumn = 3;
            actinidePlaceholder.innerHTML = '<div>89-103</div><div>Actinides</div>';
            table.appendChild(actinidePlaceholder);


            // 모든 원소 렌더링
            elements.forEach(el => {
                const div = document.createElement('div');
                div.className = 'element rounded-lg p-1 border border-gray-200 shadow-sm flex flex-col justify-center items-center transition-all duration-200 relative text-center';
                
                div.style.gridRow = el.row;
                div.style.gridColumn = el.col;
                div.dataset.category = el.category;
                
                const stateClass = stateClasses[el.state_at_stp] || 'state-unknown';
                const stateSymbol = stateSymbols[el.state_at_stp] || '?';
                
                div.innerHTML = `
                    <div class="atomic-number font-medium text-gray-600">${el.number}</div>
                    <div class="state-marker ${stateClass}">${stateSymbol}</div>
                    <div class="symbol">${el.symbol}</div>
                    <div class="name-kr">${el.name_kr}</div>
                    <div class="name-en text-gray-700">${el.name_en}</div>
                    <div class="atomic-weight text-gray-500">${el.atomic_weight}</div>
                `;
                table.appendChild(div);
            });
        }
        
        // 색상 커스터마이징 UI 렌더링
        function renderColorControls() {
            const colorControlsContainer = document.getElementById('color-controls');
            colorControlsContainer.innerHTML = '';
            
            for (const [key, value] of Object.entries(categories)) {
                // CSS 변수 초기값 설정
                document.documentElement.style.setProperty(`--color-${key}`, value.defaultColor);
                
                const controlHTML = `
                    <label class="flex items-center justify-between space-x-2">
                        <span>${value.name_kr}</span>
                        <input type="color" data-category="${key}" value="${value.defaultColor}" class="w-8 h-8 rounded border-none cursor-pointer">
                    </label>
                `;
                colorControlsContainer.innerHTML += controlHTML;
            }
        }

        // 제어판 이벤트 리스너 초기화
        function initControls() {
            const table = document.getElementById('periodic-table');

            // 정보 토글
            document.getElementById('toggle-categories').addEventListener('change', e => {
                table.classList.toggle('hide-categories', !e.target.checked);
            });
            document.getElementById('toggle-state').addEventListener('change', e => {
                table.classList.toggle('hide-state', !e.target.checked);
            });
            document.getElementById('toggle-number').addEventListener('change', e => {
                table.classList.toggle('hide-number', !e.target.checked);
            });
            document.getElementById('toggle-symbol').addEventListener('change', e => {
                table.classList.toggle('hide-symbol', !e.target.checked);
            });
            document.getElementById('toggle-name-kr').addEventListener('change', e => {
                table.classList.toggle('hide-name-kr', !e.target.checked);
            });
            document.getElementById('toggle-name-en').addEventListener('change', e => {
                table.classList.toggle('hide-name-en', !e.target.checked);
            });
            document.getElementById('toggle-weight').addEventListener('change', e => {
                table.classList.toggle('hide-weight', !e.target.checked);
            });

            // 폰트 변경
            document.getElementById('font-select').addEventListener('change', e => {
                table.style.fontFamily = e.target.value;
            });

            // 색상 변경
            document.getElementById('color-controls').addEventListener('input', e => {
                if (e.target.type === 'color') {
                    const category = e.target.dataset.category;
                    const color = e.target.value;
                    document.documentElement.style.setProperty(`--color-${category}`, color);
                }
            });

            // PNG 내보내기
            document.getElementById('export-png-btn').addEventListener('click', () => {
                const tableWrapper = document.getElementById('periodic-table-wrapper');
                const tableElement = document.getElementById('periodic-table');
                
                // 내보내기 전에 잠시 스타일 변경 (배경색 등)
                const originalBg = tableWrapper.style.backgroundColor;
                tableWrapper.style.backgroundColor = 'white'; // PNG 배경을 흰색으로
                
                html2canvas(tableElement, {
                    scale: 2, // 해상도를 2배로 높여 선명하게
                    backgroundColor: '#ffffff' // 배경색 흰색으로 지정
                }).then(canvas => {
                    // 캔버스를 이미지 URL로 변환
                    const imageURL = canvas.toDataURL('image/png');
                    
                    // 다운로드 링크 생성
                    const link = document.createElement('a');
                    link.href = imageURL;
                    link.download = 'periodic-table.png';
                    
                    // 링크 클릭하여 다운로드
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // 스타일 원상 복구
                    tableWrapper.style.backgroundColor = originalBg;
                }).catch(err => {
                    console.error('PNG 내보내기 오류:', err);
                    alert('이미지를 내보내는 중 오류가 발생했습니다.');
                    // 스타일 원상 복구
                    tableWrapper.style.backgroundColor = originalBg;
                });
            });
        }

        // DOM이 로드되면 스크립트 실행
        document.addEventListener('DOMContentLoaded', () => {
            renderTable();
            renderColorControls();
            initControls();
        });
    </script>

</body>
</html>
